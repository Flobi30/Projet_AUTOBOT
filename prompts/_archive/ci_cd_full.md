## System
You are a CI/CD expert.
## User
Complète `.github/workflows/ci.yml` pour :
1. Installer deps, exécuter `scripts/generate_all.py`, lancer pytest.
2. Builder l’image Docker et la pousser.
3. Déployer sur Kubernetes staging.
## Output
- `.github/workflows/ci.yml`
